{% schema %}
{
  "name": "Hero Image Side",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Our Hero Slides"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Slide Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "HoliRoots Wins Allure Best of Beauty"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subheading",
          "default": "Inspired by the timeless Indian ritual of hair oiling."
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link",
          "default": "/collections/all"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Hero Image Side",
      "blocks": [{ "type": "slide" }]
    }
  ]
}
{% endschema %}

<div class="hero-slider top-custom-px">
  <div class="side-wrapper">
    {% for block in section.blocks %}
      <div class="swiper-slide relative w-full hero" id="slide-{{ block.id }}">
        {% if block.settings.image != blank %}
          <img
            class="w-full h-full object-cover"
            src="{{ block.settings.image | image_url: width: 1600 }}"
            alt="{{ block.settings.title }}"
          >
        {% endif %}

        <div class="absolute inset-0 flex flex-col items-center justify-center text-center text-white px-6 w-full md:w-[50%] xl:w-[30%] text-hero-section">
          <!-- Simple stars container -->
          <div class="absolute inset-0 pointer-events-none stars-field"></div>

          {% if block.settings.title != blank %}
            <h2 class="text-2xl md:text-6xl font-bold mb-4 relative z-10">
              {{ block.settings.title }}
            </h2>
          {% endif %}
          {% if block.settings.subtitle != blank %}
            <p class="text-lg text-sm md:text-xl mb-6 font-second">{{ block.settings.subtitle }}</p>
          {% endif %}
          {% if block.settings.button_label != blank and block.settings.button_link != blank %}
            <a
              href="{{ block.settings.button_link }}"
              class="bg-white text-black px-6 py-3 rounded-full font-semibold hover:bg-gray-200 transition"
            >
              {{ block.settings.button_label }}
            </a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<style>
  .star {
    position: absolute;
    transition: all 0.3s ease;
  }

  @media (max-width: 575.98px) {
    .text-hero-section {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
    }

    .text-hero-section * {
      text-align: left;
    }

    .text-hero-section a {
      margin-top: 10px;
    }

    .text-hero-section h2,
    p {
      width: 100%;
      padding: 0;
      margin: 0;
    }
  }

  .star-float {
    animation: starFloat 6s ease-in-out infinite;
  }

  .star-twinkle {
    animation: starTwinkle 3s ease-in-out infinite;
  }

  .star-pulse {
    animation: starPulse 4s ease-in-out infinite;
  }

  @keyframes starFloat {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-10px) rotate(180deg);
    }
  }

  @keyframes starTwinkle {
    0%,
    100% {
      opacity: 0.3;
      transform: scale(0.8);
    }
    50% {
      opacity: 1;
      transform: scale(1.2);
    }
  }

  @keyframes starPulse {
    0%,
    100% {
      opacity: 0.4;
      transform: scale(1);
    }
    50% {
      opacity: 0.9;
      transform: scale(1.1);
    }
  }
</style>

<script>
  $(document).ready(function () {
    $('.side-wrapper').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      dots: false,
      infinite: true,
      arrows: true,
      autoplay: true,
      autoplaySpeed: 5000,
      arrows: false,
    });

    // Simple star SVG
    const starSVG = `
      <svg viewBox="0 0 21 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20.1001 12.9001H15.6001C15.5001 12.9001 15.5001 12.9001 15.4001 12.9001H12.9001C12.8001 12.9001 12.7001 12.8001 12.6001 12.8001C11.7001 12.4001 11.4001 11.4001 11.1001 10.5001C10.9001 9.8001 10.7001 9.2001 10.6001 8.5001V0.200098C10.6001 -0.0999023 10.2001 -0.0999023 10.2001 0.200098V10.0001C10.1001 10.6001 10.0001 11.2001 9.6001 11.7001C9.5001 11.8001 9.4001 12.0001 9.3001 12.1001C8.6001 12.7001 7.5001 12.8001 6.6001 12.8001H6.5001H0.200098C-0.0999023 12.8001 -0.0999023 13.2001 0.200098 13.2001H7.3001H7.4001C9.3001 14.4001 10.0001 16.7001 10.2001 18.9001V26.9001C10.2001 27.2001 10.6001 27.2001 10.6001 26.9001V18.7001C11.0001 17.1001 11.5001 15.5001 12.6001 14.3001L12.7001 14.2001C13.2001 13.8001 13.8001 13.5001 14.5001 13.3001H20.2001C20.4001 13.3001 20.4001 12.9001 20.1001 12.9001Z" fill="white"></path>
      </svg>
    `;

    // Simple function to create stars
    function createRandomStars() {
      $('.stars-field').each(function () {
        const container = $(this)[0];
        container.innerHTML = '';

        const numberOfStars = Math.floor(Math.random() * 10) + 15;

        for (let i = 0; i < numberOfStars; i++) {
          const star = document.createElement('div');
          star.className = 'star';

          const size = Math.random() * 16 + 8;
          star.style.width = size + 'px';
          star.style.height = size * 1.33 + 'px';

          let left, top;
          do {
            left = Math.random() * 100;
            top = Math.random() * 100;
          } while (left > 20 && left < 80 && top > 20 && top < 80);

          star.style.left = left + '%';
          star.style.top = top + '%';

          star.style.opacity = Math.random() * 0.6 + 0.3;

          const animations = ['star-float', 'star-twinkle', 'star-pulse'];
          star.classList.add(animations[Math.floor(Math.random() * animations.length)]);

          star.style.animationDelay = Math.random() * 4 + 's';

          star.innerHTML = starSVG;
          container.appendChild(star);
        }
      });
    }

    createRandomStars();
    setInterval(createRandomStars, 8000);
    $('.hero').hover(
      function () {
        $(this)
          .find('.stars-field')
          .each(function () {
            const container = $(this)[0];
            for (let i = 0; i < 10; i++) {
              const star = document.createElement('div');
              star.className = 'star star-twinkle';
              star.style.width = Math.random() * 12 + 6 + 'px';
              star.style.height = Math.random() * 16 + 8 + 'px';
              star.style.left = Math.random() * 100 + '%';
              star.style.top = Math.random() * 100 + '%';
              star.style.opacity = Math.random() * 0.4 + 0.2;
              star.style.animationDelay = Math.random() * 2 + 's';
              star.innerHTML = starSVG;
              container.appendChild(star);
            }
          });
      },
      function () {
        setTimeout(createRandomStars, 1000);
      }
    );
  });
</script>
