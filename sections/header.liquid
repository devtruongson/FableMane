{{ 'drop-down.css' | asset_url | stylesheet_tag }}
<div class="fixed top-0 left-0 right-0 z-[10000]">
  {% render 'promo-bar' %}
  <header class="site-header">
    <div class=" container mx-auto flex items-center justify-between z-[10000]">
      <nav class="layout-three">
        <ul class="flex items-center">
          <li
            class="flex items-center mb-[1px] z-index-max sm:flex xl:hidden pr-[12px] relative mobile-menu-container"
          >
            <span id="mobile-menu-toggle" class="mobile-menu-icon">
              {{- 'icon-bar.svg' | inline_asset_content -}}
            </span>
            <div class="menu-mb hidden mobile-menu-content">
              <ul
                style="padding: 10px 20px;"
                class="flex items-center font-second-semibold font-semibold text-xl [&>li]:mr-[27px] [&>li]:leading-[28px] pt-[1px] hidden md:flex nav-mobile"
              >
                <li class="pb-2 mt-1 pr-1 relative mobile-dropdown-item">
                  <span class="flex [&>svg]:relative [&>svg]:z-index-max [&>svg]:ms-[5px] [&>svg]:top-[3px] mobile-dropdown-toggle cursor-pointer">
                    <span class="relative z-index-max font-quincy font-[800] md:text-[3.2rem] md:leading-[2.8rem]">
                      {{- 'icon-menu.svg' | inline_asset_content -}}
                      Shop
                    </span>
                    {{- 'icon-down.svg' | inline_asset_content -}}
                  </span>
                  <div class="mobile-dropdown-content hidden">
                    {% render 'dropdown-shop' %}
                  </div>
                </li>
                <li class="pb-2 mt-1 pr-1 relative mobile-dropdown-item">
                  <span class="flex [&>svg]:relative [&>svg]:z-index-max [&>svg]:ms-[5px] [&>svg]:top-[3px] mobile-dropdown-toggle cursor-pointer">
                    <span class="relative z-index-max font-quincy font-[800] md:text-[3.2rem] md:leading-[2.8rem]">
                      {{- 'icon-menu.svg' | inline_asset_content -}}
                      Discover
                    </span>
                    {{- 'icon-down.svg' | inline_asset_content -}}
                  </span>
                  <div class="mobile-dropdown-content hidden">
                    {% render 'dropdown-discover' %}
                  </div>
                </li>
                <li class="flex pb-2 mt-1 pr-1 relative z-index-max font-quincy font-[800] md:text-[3.2rem] md:leading-[2.8rem]">
                  <a href="#">BYOB</a>
                </li>
              </ul>
            </div>
          </li>
          <li
            id="mobile-search-container"
            class="flex header-search-mobile items-center z-index-max sm:flex xl:hidden pr-[12px]"
          >
            <button id="mobile-search-toggle" class="text-xl button-search toggle-mobile search-icon-mb">
              <span class="search-icon-close">
                {{- 'icon-search.svg' | inline_asset_content -}}
              </span>
              <span class="search-icon-open hidden">
                {{- 'icon-close.svg' | inline_asset_content -}}
              </span>
            </button>
          </li>
        </ul>
        <ul
          class="flex items-center font-second-semibold font-semibold xl [&>li]:mr-4 pt-1 hidden md:flex xl:flex text-xl "
        >
          <li class="nav-item flex pb-2 mt-1 pr-1 [&>svg]:relative [&>svg]:z-[50] [&>svg]:ms-1 [&>svg]:top-[0.5]">
            <span class="relative z-index-max dropdown-toggle cursor-pointer">
              {{- 'icon-menu.svg' | inline_asset_content -}}
              Shop
            </span>
            {{- 'icon-down.svg' | inline_asset_content -}}
            {% render 'dropdown-shop' %}
          </li>
          <li class="nav-item relative site-nav__simple-menu flex pb-2 mt-1 pr-1 [&>svg]:relative [&>svg]:z-[50] [&>svg]:ms-1 [&>svg]:top-[0.5]">
            <span class="relative z-index-max dropdown-toggle cursor-pointer">Discover</span>
            {{- 'icon-down.svg' | inline_asset_content -}}
            {% render 'dropdown-discover' %}
          </li>
          <li class="flex pb-2 mt-1 pr-1 relative z-index-max">
            <a href="#">BYOB</a>
          </li>
        </ul>
      </nav>
      <a
        class="layout-three mb-center h-[18px] md:h-[39px] flex justify-center"
        title="Home"
        href="{{ routes.root_url }}"
      >
        <img
          src="{{ 'logo-lg.webp' | asset_url }}"
          alt="asd"
          width="368"
          class="mx-auto max-h-full logo-header absolute z-[99999999999999999999] block"
          height="38"
          loading="lazy"
        >
        <img
          src="{{ 'logo-second.avif' | asset_url }}"
          alt="asd"
          width="94"
          class="mx-auto logo-header-second h-[94px] w-[99px] absolute top-[18px] z-[99999999999999999999] hidden"
          height="88"
          loading="lazy"
        >
      </a>
      <ul class="flex items-center layout-three [&>li]:leading-[28px] justify-end">
        <li class="mb-hidden flex header-search items-center gap-1 mr-8 z-index-max hidden md:block">
          <button class="text-xl button-search pt-2">
            <span class="search-icon-close">
              {{- 'icon-search.svg' | inline_asset_content -}}
            </span>
            <span class="search-icon-open hidden">
              {{- 'icon-close.svg' | inline_asset_content -}}
            </span>
          </button>
        </li>
        <li class="flex items-center gap-1 text-xl mr-8 pb-[2px] relative z-index-max xs:mr-[12px]">
          <button class="text-xl button-icon">
            {{- 'icon-user.svg' | inline_asset_content -}}
          </button>
        </li>
        <li class="flex items-center gap-1 pb-[2px] relative z-index-max">
          <button class="text-xl button-icon relative cursor-pointer" onclick="redirectCart()">
            {{- 'icon-cart.svg' | inline_asset_content -}}
            <span class="cart-badge hidden">
              {{ cart.item_count }}
            </span>
          </button>
        </li>
      </ul>
    </div>
    <div class="header-divider width-base"></div>

    <!-- Mobile Search Form -->
    <div id="mobile-search-form" class="site-header__search-bar-mobile hidden">
      <form
        class="flex justify-between mx-auto container px-4 py-3"
        action="{{ routes.search_url }}"
        method="get"
        role="search"
      >
        <div class="flex-1 flex justify-between items-center bg-white rounded-lg px-3 py-2">
          <input
            type="text"
            name="q"
            placeholder="TÃ¬m kiáº¿m sáº£n pháº©m..."
            class="font-second text-base outline-none flex-1 bg-transparent placeholder-gray-500"
          >
          <button type="submit" class="ml-2 text-gray-600 hover:text-black transition-colors p-1 rounded">
            {{- 'icon-search.svg' | inline_asset_content -}}
          </button>
        </div>
      </form>
    </div>

    <!-- Desktop Search Form -->
    <div class="site-header__search-bar hidden">
      <form class="flex justify-between mx-auto container" action="{{ routes.search_url }}" method="get" role="search">
        <div class="flex-1 flex justify-between items-center">
          <input
            type="text"
            name="q"
            placeholder="Start typing your search query"
            class="font-second text-2xl outline-none flex-1"
          >
          <button class="btn !text-lg !px-8 !py-2 !bg-transparent">Search</button>
        </div>
      </form>
    </div>
  </header>
</div>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "promo_1",
      "label": "Promo message 1",
      "default": "âœ¨ Sign up for 15% OFF your order âœ¨"
    },
    {
      "type": "text",
      "id": "promo_2",
      "label": "Promo message 2",
      "default": "ðŸ“£ NEW! Root Refresh Dry Shampoo ðŸ“£"
    },
    {
      "type": "text",
      "id": "promo_3",
      "label": "Promo message 3",
      "default": "FREE Shipping on US orders +$50"
    }
  ]
}
{% endschema %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Desktop dropdown functionality
    const desktopDropdownItems = document.querySelectorAll('.dropdown-item');

    desktopDropdownItems.forEach((item) => {
      const toggle = item.querySelector('.dropdown-toggle');
      const content = item.querySelector('.dropdown-content');

      if (toggle && content) {
        toggle.addEventListener('click', function (e) {
          e.preventDefault();

          // Close other dropdowns
          desktopDropdownItems.forEach((otherItem) => {
            if (otherItem !== item) {
              const otherContent = otherItem.querySelector('.dropdown-content');
              if (otherContent) {
                otherContent.classList.add('hidden');
              }
            }
          });

          // Toggle current dropdown
          content.classList.toggle('hidden');
        });
      }
    });

    // Mobile dropdown functionality
    const mobileDropdownItems = document.querySelectorAll('.mobile-dropdown-item');

    mobileDropdownItems.forEach((item) => {
      const toggle = item.querySelector('.mobile-dropdown-toggle');
      const content = item.querySelector('.mobile-dropdown-content');

      if (toggle && content) {
        toggle.addEventListener('click', function (e) {
          e.preventDefault();

          // Close other mobile dropdowns
          mobileDropdownItems.forEach((otherItem) => {
            if (otherItem !== item) {
              const otherContent = otherItem.querySelector('.mobile-dropdown-content');
              if (otherContent) {
                otherContent.classList.add('hidden');
              }
            }
          });

          // Toggle current mobile dropdown
          content.classList.toggle('hidden');
        });
      }
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', function (e) {
      if (!e.target.closest('.dropdown-item') && !e.target.closest('.mobile-dropdown-item')) {
        // Close all desktop dropdowns
        desktopDropdownItems.forEach((item) => {
          const content = item.querySelector('.dropdown-content');
          if (content) {
            content.classList.add('hidden');
          }
        });

        // Close all mobile dropdowns
        mobileDropdownItems.forEach((item) => {
          const content = item.querySelector('.mobile-dropdown-content');
          if (content) {
            content.classList.add('hidden');
          }
        });
      }
    });
  });
</script>

<style>
  /* Dropdown animations */
  .dropdown-content,
  .mobile-dropdown-content {
    transition: all 0.3s ease-in-out;
    opacity: 1;
  }

  .dropdown-content.hidden,
  .mobile-dropdown-content.hidden {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
  }

  .dropdown-content:not(.hidden),
  .mobile-dropdown-content:not(.hidden) {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Cursor pointer for clickable elements */
  .dropdown-toggle,
  .mobile-dropdown-toggle {
    cursor: pointer;
  }

  /* Hover effects */
  .dropdown-toggle:hover,
  .mobile-dropdown-toggle:hover {
    opacity: 0.8;
  }
</style>
